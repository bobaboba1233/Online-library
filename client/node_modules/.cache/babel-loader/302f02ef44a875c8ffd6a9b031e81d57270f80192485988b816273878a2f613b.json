{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0431\\u043E\\u0433\\u0434\\u0430\\u043D\\\\Documents\\\\GitHub\\\\Online-library\\\\client\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../styles/Profile.css';\nimport Header from '../components/Header';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  var _userData$subscriptio, _userData$subscriptio2;\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [subscribing, setSubscribing] = useState(false);\n  const [selectedPlan, setSelectedPlan] = useState(null);\n  const [showPlans, setShowPlans] = useState(false);\n  const [editingField, setEditingField] = useState(null);\n  const [editValue, setEditValue] = useState('');\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [isAvatarUploading, setIsAvatarUploading] = useState(false);\n  const navigate = useNavigate();\n  const subscriptionPlans = [{\n    id: 'month',\n    name: '1 месяц',\n    price: '299 ₽',\n    duration: 1,\n    description: 'Доступ ко всем книгам на 1 месяц',\n    popular: false\n  }, {\n    id: '3months',\n    name: '3 месяца',\n    price: '799 ₽',\n    duration: 3,\n    description: 'Экономия 15% по сравнению с помесячной оплатой',\n    popular: true\n  }, {\n    id: 'year',\n    name: '1 год',\n    price: '2 999 ₽',\n    duration: 12,\n    description: 'Экономия 30% по сравнению с помесячной оплатой',\n    popular: false\n  }];\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          navigate('/auth');\n          return;\n        }\n        const response = await axios.get('http://localhost:5000/api/auth/profile', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUserData(response.data);\n      } catch (error) {\n        console.error('Ошибка загрузки профиля:', error);\n        localStorage.removeItem('token');\n        navigate('/auth');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProfile();\n  }, [navigate]);\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/');\n  };\n  const handleSubscribe = async () => {\n    if (subscribing || !selectedPlan) return;\n    setSubscribing(true);\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post('http://localhost:5000/api/user/subscribe', {\n        duration: selectedPlan.duration\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUserData(prev => ({\n        ...prev,\n        subscription: response.data.subscription\n      }));\n      setShowPlans(false);\n      setSelectedPlan(null);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Ошибка оформления подписки:', error);\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Не удалось оформить подписку');\n    } finally {\n      setSubscribing(false);\n    }\n  };\n  const handleCancelSubscription = async () => {\n    if (!window.confirm('Вы уверены, что хотите отменить подписку?')) return;\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post('http://localhost:5000/api/user/unsubscribe', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUserData(prev => ({\n        ...prev,\n        subscription: {\n          ...prev.subscription,\n          isActive: false\n        }\n      }));\n      alert('Подписка успешно отменена');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Ошибка отмены подписки:', error);\n      alert(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Не удалось отменить подписку');\n    }\n  };\n  const startEditing = field => {\n    setEditingField(field);\n    setEditValue(userData[field]);\n  };\n  const cancelEditing = () => {\n    setEditingField(null);\n    setEditValue('');\n  };\n  const saveChanges = async () => {\n    if (!editValue.trim()) return;\n    setIsUpdating(true);\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.put('http://localhost:5000/api/user/profile', {\n        [editingField]: editValue\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUserData(response.data);\n      setEditingField(null);\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Ошибка обновления профиля:', error);\n      alert(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Не удалось обновить данные');\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n  const handleAvatarChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const formData = new FormData();\n    formData.append('avatar', file);\n    setIsAvatarUploading(true);\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.put('http://localhost:5000/api/user/avatar', formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setUserData(prev => ({\n        ...prev,\n        avatar: response.data.avatarUrl\n      }));\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error('Ошибка загрузки аватара:', error);\n      alert(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Не удалось обновить аватар');\n    } finally {\n      setIsAvatarUploading(false);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      isLoggedIn: !!userData,\n      userData: userData,\n      onAuthClick: () => navigate('/auth')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-btn\",\n          onClick: () => navigate(-1),\n          children: \"\\u2190 \\u041D\\u0430\\u0437\\u0430\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041C\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), userData && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile-avatar\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: userData.avatar || '/default-avatar.png',\n                alt: \"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u0418\\u043C\\u044F:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this), editingField === 'username' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-field\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editValue,\n                    onChange: e => setEditValue(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: saveChanges,\n                    disabled: isUpdating,\n                    className: \"save-btn-field\",\n                    children: isUpdating ? '...' : '✓'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: cancelEditing,\n                    disabled: isUpdating,\n                    className: \"cancel-btn-field\",\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"field-value\",\n                  children: [userData.username, /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => startEditing('username'),\n                    className: \"edit-btn-field\",\n                    children: \"\\u270F\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Email:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 21\n                }, this), editingField === 'email' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-field-field\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"email\",\n                    value: editValue,\n                    onChange: e => setEditValue(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: saveChanges,\n                    disabled: isUpdating,\n                    className: \"save-btn-field\",\n                    children: isUpdating ? '...' : '✓'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: cancelEditing,\n                    disabled: isUpdating,\n                    className: \"cancel-btn-field\",\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"field-value\",\n                  children: [userData.email, /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => startEditing('email'),\n                    className: \"edit-btn-field\",\n                    children: \"\\u270F\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 21\n                }, this), ' ', new Date(userData.createdAt).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043A\\u0430:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 21\n                }, this), ' ', (_userData$subscriptio = userData.subscription) !== null && _userData$subscriptio !== void 0 && _userData$subscriptio.isActive ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"active-badge\",\n                    children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 25\n                  }, this), \" \\u0434\\u043E \", new Date(userData.subscription.endDate).toLocaleDateString()]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inactive-badge\",\n                  children: \"\\u041D\\u0435 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this), (_userData$subscriptio2 = userData.subscription) !== null && _userData$subscriptio2 !== void 0 && _userData$subscriptio2.isActive ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCancelSubscription,\n            className: \"cancel-subscription-btn\",\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043A\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: !showPlans ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowPlans(true),\n              className: \"subscribe-btn\",\n              children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043A\\u0443\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"subscription-plans\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0430\\u0440\\u0438\\u0444\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"plans-grid\",\n                children: subscriptionPlans.map(plan => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `plan-card ${(selectedPlan === null || selectedPlan === void 0 ? void 0 : selectedPlan.id) === plan.id ? 'selected' : ''} ${plan.popular ? 'popular' : ''}`,\n                  onClick: () => setSelectedPlan(plan),\n                  children: [plan.popular && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"popular-badge\",\n                    children: \"\\u0412\\u044B\\u0433\\u043E\\u0434\\u043D\\u043E\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 46\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: plan.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"plan-price\",\n                    children: plan.price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"plan-description\",\n                    children: plan.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 29\n                  }, this), (selectedPlan === null || selectedPlan === void 0 ? void 0 : selectedPlan.id) === plan.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"selected-check\",\n                    children: \"\\u2713\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 31\n                  }, this)]\n                }, plan.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"plan-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setShowPlans(false);\n                    setSelectedPlan(null);\n                  },\n                  className: \"cancel-plan-btn\",\n                  children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSubscribe,\n                  className: \"confirm-subscribe-btn\",\n                  disabled: !selectedPlan || subscribing,\n                  children: subscribing ? 'Оформление...' : 'Подписаться'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 21\n            }, this)\n          }, void 0, false)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"logout-btn\",\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Profile, \"c7eOTuvyJ2toIDU631l/DdWJ/ko=\", false, function () {\n  return [useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","Header","jsxDEV","_jsxDEV","Fragment","_Fragment","Profile","_s","_userData$subscriptio","_userData$subscriptio2","userData","setUserData","loading","setLoading","subscribing","setSubscribing","selectedPlan","setSelectedPlan","showPlans","setShowPlans","editingField","setEditingField","editValue","setEditValue","isUpdating","setIsUpdating","isAvatarUploading","setIsAvatarUploading","navigate","subscriptionPlans","id","name","price","duration","description","popular","fetchProfile","token","localStorage","getItem","response","get","headers","Authorization","data","error","console","removeItem","handleLogout","handleSubscribe","post","prev","subscription","_error$response","_error$response$data","alert","message","handleCancelSubscription","window","confirm","isActive","_error$response2","_error$response2$data","startEditing","field","cancelEditing","saveChanges","trim","put","_error$response3","_error$response3$data","handleAvatarChange","e","file","target","files","formData","FormData","append","avatar","avatarUrl","_error$response4","_error$response4$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isLoggedIn","onAuthClick","onClick","src","alt","type","value","onChange","disabled","username","email","Date","createdAt","toLocaleDateString","endDate","map","plan","_c","$RefreshReg$"],"sources":["C:/Users/богдан/Documents/GitHub/Online-library/client/src/pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport '../styles/Profile.css';\r\nimport Header from '../components/Header';\r\n\r\nconst Profile = () => {\r\n  const [userData, setUserData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [subscribing, setSubscribing] = useState(false);\r\n  const [selectedPlan, setSelectedPlan] = useState(null);\r\n  const [showPlans, setShowPlans] = useState(false);\r\n  const [editingField, setEditingField] = useState(null);\r\n  const [editValue, setEditValue] = useState('');\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [isAvatarUploading, setIsAvatarUploading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const subscriptionPlans = [\r\n    {\r\n      id: 'month',\r\n      name: '1 месяц',\r\n      price: '299 ₽',\r\n      duration: 1,\r\n      description: 'Доступ ко всем книгам на 1 месяц',\r\n      popular: false\r\n    },\r\n    {\r\n      id: '3months',\r\n      name: '3 месяца',\r\n      price: '799 ₽',\r\n      duration: 3,\r\n      description: 'Экономия 15% по сравнению с помесячной оплатой',\r\n      popular: true\r\n    },\r\n    {\r\n      id: 'year',\r\n      name: '1 год',\r\n      price: '2 999 ₽',\r\n      duration: 12,\r\n      description: 'Экономия 30% по сравнению с помесячной оплатой',\r\n      popular: false\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n          navigate('/auth');\r\n          return;\r\n        }\r\n\r\n        const response = await axios.get('http://localhost:5000/api/auth/profile', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setUserData(response.data);\r\n      } catch (error) {\r\n        console.error('Ошибка загрузки профиля:', error);\r\n        localStorage.removeItem('token');\r\n        navigate('/auth');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, [navigate]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    navigate('/');\r\n  };\r\n\r\n  const handleSubscribe = async () => {\r\n    if (subscribing || !selectedPlan) return;\r\n    setSubscribing(true);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.post(\r\n        'http://localhost:5000/api/user/subscribe',\r\n        { duration: selectedPlan.duration },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        }\r\n      );\r\n      \r\n      setUserData(prev => ({\r\n        ...prev,\r\n        subscription: response.data.subscription\r\n      }));\r\n      setShowPlans(false);\r\n      setSelectedPlan(null);\r\n    } catch (error) {\r\n      console.error('Ошибка оформления подписки:', error);\r\n      alert(error.response?.data?.message || 'Не удалось оформить подписку');\r\n    } finally {\r\n      setSubscribing(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelSubscription = async () => {\r\n    if (!window.confirm('Вы уверены, что хотите отменить подписку?')) return;\r\n    \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.post(\r\n        'http://localhost:5000/api/user/unsubscribe',\r\n        {},\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        }\r\n      );\r\n      \r\n      setUserData(prev => ({\r\n        ...prev,\r\n        subscription: { ...prev.subscription, isActive: false }\r\n      }));\r\n      alert('Подписка успешно отменена');\r\n    } catch (error) {\r\n      console.error('Ошибка отмены подписки:', error);\r\n      alert(error.response?.data?.message || 'Не удалось отменить подписку');\r\n    }\r\n  };\r\n\r\n  const startEditing = (field) => {\r\n    setEditingField(field);\r\n    setEditValue(userData[field]);\r\n  };\r\n\r\n  const cancelEditing = () => {\r\n    setEditingField(null);\r\n    setEditValue('');\r\n  };\r\n\r\n  const saveChanges = async () => {\r\n    if (!editValue.trim()) return;\r\n    \r\n    setIsUpdating(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.put(\r\n        'http://localhost:5000/api/user/profile',\r\n        { [editingField]: editValue },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        }\r\n      );\r\n      \r\n      setUserData(response.data);\r\n      setEditingField(null);\r\n    } catch (error) {\r\n      console.error('Ошибка обновления профиля:', error);\r\n      alert(error.response?.data?.message || 'Не удалось обновить данные');\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\nconst handleAvatarChange = async (e) => {\r\n  const file = e.target.files[0];\r\n  if (!file) return;\r\n\r\n  const formData = new FormData();\r\n  formData.append('avatar', file);\r\n\r\n  setIsAvatarUploading(true);\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.put(\r\n      'http://localhost:5000/api/user/avatar',\r\n      formData,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      }\r\n    );\r\n\r\n    setUserData(prev => ({\r\n      ...prev,\r\n      avatar: response.data.avatarUrl\r\n    }));\r\n  } catch (error) {\r\n    console.error('Ошибка загрузки аватара:', error);\r\n    alert(error.response?.data?.message || 'Не удалось обновить аватар');\r\n  } finally {\r\n    setIsAvatarUploading(false);\r\n  }\r\n};\r\n  if (loading) return <div className=\"loading\">Загрузка...</div>;\r\n\r\n  return (\r\n    <>\r\n      <Header \r\n        isLoggedIn={!!userData} \r\n        userData={userData}\r\n        onAuthClick={() => navigate('/auth')}\r\n      />\r\n\r\n      <div className=\"profile-container\">\r\n        <div className=\"profile-card\">\r\n          <button className=\"back-btn\" onClick={() => navigate(-1)}>\r\n            ← Назад\r\n          </button>\r\n\r\n          <h2>Мой профиль</h2>\r\n\r\n          {userData && (\r\n            <>\r\n              <div className=\"profile-info\">\r\n                <div className=\"profile-avatar\">\r\n                  <img\r\n                    src={userData.avatar || '/default-avatar.png'}\r\n                    alt=\"Аватар\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"profile-details\">\r\n                  <div className=\"profile-field\">\r\n                    <strong>Имя:</strong>\r\n                    {editingField === 'username' ? (\r\n                      <div className=\"edit-field\">\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editValue}\r\n                          onChange={(e) => setEditValue(e.target.value)}\r\n                        />\r\n                        <button \r\n                          onClick={saveChanges} \r\n                          disabled={isUpdating}\r\n                          className=\"save-btn-field\"\r\n                        >\r\n                          {isUpdating ? '...' : '✓'}\r\n                        </button>\r\n                        <button \r\n                          onClick={cancelEditing} \r\n                          disabled={isUpdating}\r\n                          className=\"cancel-btn-field\"\r\n                        >\r\n                          ×\r\n                        </button>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"field-value\">\r\n                        {userData.username}\r\n                        <button \r\n                          onClick={() => startEditing('username')} \r\n                          className=\"edit-btn-field\"\r\n                        >\r\n                          ✏️\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"profile-field\">\r\n                    <strong>Email:</strong>\r\n                    {editingField === 'email' ? (\r\n                      <div className=\"edit-field-field\">\r\n                        <input\r\n                          type=\"email\"\r\n                          value={editValue}\r\n                          onChange={(e) => setEditValue(e.target.value)}\r\n                        />\r\n                        <button \r\n                          onClick={saveChanges} \r\n                          disabled={isUpdating}\r\n                          className=\"save-btn-field\"\r\n                        >\r\n                          {isUpdating ? '...' : '✓'}\r\n                        </button>\r\n                        <button \r\n                          onClick={cancelEditing} \r\n                          disabled={isUpdating}\r\n                          className=\"cancel-btn-field\"\r\n                        >\r\n                          ×\r\n                        </button>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"field-value\">\r\n                        {userData.email}\r\n                        <button \r\n                          onClick={() => startEditing('email')} \r\n                          className=\"edit-btn-field\"\r\n                        >\r\n                          ✏️\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <p>\r\n                    <strong>Дата регистрации:</strong>{' '}\r\n                    {new Date(userData.createdAt).toLocaleDateString()}\r\n                  </p>\r\n                  <p>\r\n                    <strong>Подписка:</strong>{' '}\r\n                    {userData.subscription?.isActive ? (\r\n                      <>\r\n                        <span className=\"active-badge\">Активна</span> до {new Date(userData.subscription.endDate).toLocaleDateString()}\r\n                      </>\r\n                    ) : (\r\n                      <span className=\"inactive-badge\">Не активна</span>\r\n                    )}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {userData.subscription?.isActive ? (\r\n                <button\r\n                  onClick={handleCancelSubscription}\r\n                  className=\"cancel-subscription-btn\"\r\n                >\r\n                  Отменить подписку\r\n                </button>\r\n              ) : (\r\n                <>\r\n                  {!showPlans ? (\r\n                    <button\r\n                      onClick={() => setShowPlans(true)}\r\n                      className=\"subscribe-btn\"\r\n                    >\r\n                      Оформить подписку\r\n                    </button>\r\n                  ) : (\r\n                    <div className=\"subscription-plans\">\r\n                      <h3>Выберите тариф</h3>\r\n                      <div className=\"plans-grid\">\r\n                        {subscriptionPlans.map(plan => (\r\n                          <div \r\n                            key={plan.id}\r\n                            className={`plan-card ${selectedPlan?.id === plan.id ? 'selected' : ''} ${plan.popular ? 'popular' : ''}`}\r\n                            onClick={() => setSelectedPlan(plan)}\r\n                          >\r\n                            {plan.popular && <div className=\"popular-badge\">Выгодно</div>}\r\n                            <h4>{plan.name}</h4>\r\n                            <div className=\"plan-price\">{plan.price}</div>\r\n                            <p className=\"plan-description\">{plan.description}</p>\r\n                            {selectedPlan?.id === plan.id && (\r\n                              <div className=\"selected-check\">✓</div>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n\r\n                      <div className=\"plan-actions\">\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowPlans(false);\r\n                            setSelectedPlan(null);\r\n                          }}\r\n                          className=\"cancel-plan-btn\"\r\n                        >\r\n                          Назад\r\n                        </button>\r\n                        <button\r\n                          onClick={handleSubscribe}\r\n                          className=\"confirm-subscribe-btn\"\r\n                          disabled={!selectedPlan || subscribing}\r\n                        >\r\n                          {subscribing ? 'Оформление...' : 'Подписаться'}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          <button onClick={handleLogout} className=\"logout-btn\">\r\n            Выйти\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}