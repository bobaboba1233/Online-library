{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0431\\u043E\\u0433\\u0434\\u0430\\u043D\\\\Documents\\\\GitHub\\\\Online-library\\\\client\\\\src\\\\pages\\\\AdminPanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/AdminPanel.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AdminPanel = () => {\n  _s();\n  // Состояния для управления вкладками\n  const [activeTab, setActiveTab] = useState('books');\n\n  // Состояния для управления книгами\n  const [books, setBooks] = useState([]);\n  const [bookFormData, setBookFormData] = useState({\n    title: '',\n    author: '',\n    genre: 'Фантастика',\n    cover: '/default-cover.jpg',\n    year: '',\n    pages: '',\n    price: '',\n    inStock: true,\n    rating: 0,\n    description: '',\n    isSubscriptionOnly: false\n  });\n  const [preview, setPreview] = useState('');\n  const [editingId, setEditingId] = useState(null);\n  const [isLoadingBooks, setIsLoadingBooks] = useState(true);\n\n  // Состояния для управления подписками\n  const [users, setUsers] = useState([]);\n  const [isLoadingUsers, setIsLoadingUsers] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Загрузка данных при монтировании и переключении вкладок\n  useEffect(() => {\n    if (activeTab === 'books') {\n      fetchBooks();\n    } else if (activeTab === 'subscriptions') {\n      fetchUsers();\n    }\n  }, [activeTab]);\n  const fetchBooks = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/api/books');\n      setBooks(response.data);\n      setIsLoadingBooks(false);\n    } catch (error) {\n      alert('Ошибка загрузки книг');\n    }\n  };\n  useEffect(() => {\n    if (activeTab === 'subscriptions') {\n      console.log('Users data:', users); // Добавьте эту строку\n      fetchUsers();\n    }\n  }, [activeTab]);\n  const fetchUsers = async () => {\n    try {\n      const token = localStorage.getItem('adminToken');\n      const response = await axios.get('http://localhost:5000/api/admin/users', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // Добавляем проверку данных\n      const usersWithIds = response.data.map(user => {\n        if (!user.id) {\n          console.warn('User without _id:', user);\n        }\n        return user;\n      });\n      setUsers(usersWithIds);\n      setIsLoadingUsers(false);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      alert('Ошибка загрузки пользователей');\n    }\n  };\n  const handleBookSubmit = async e => {\n    e.preventDefault();\n    try {\n      const transformedData = {\n        ...bookFormData,\n        year: Number(bookFormData.year),\n        pages: Number(bookFormData.pages),\n        price: Number(bookFormData.price),\n        rating: Number(bookFormData.rating),\n        isSubscriptionOnly: Boolean(bookFormData.isSubscriptionOnly)\n      };\n      const token = localStorage.getItem('adminToken');\n      if (editingId) {\n        const response = await axios.put(`http://localhost:5000/api/admin/books/${editingId}`, transformedData, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setBooks(prevBooks => prevBooks.map(book => book._id === editingId ? response.data : book));\n        alert('Книга успешно обновлена!');\n      } else {\n        const response = await axios.post('http://localhost:5000/api/admin/books', transformedData, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setBooks(prevBooks => [...prevBooks, response.data]);\n        alert('Книга успешно добавлена!');\n      }\n      resetBookForm();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Ошибка:', error);\n      alert(`Ошибка: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message}`);\n    }\n  };\n  const handleEditBook = book => {\n    setBookFormData({\n      title: book.title,\n      author: book.author,\n      genre: book.genre,\n      cover: book.cover,\n      year: book.year,\n      pages: book.pages,\n      price: book.price,\n      inStock: book.inStock,\n      rating: book.rating,\n      description: book.description || '',\n      isSubscriptionOnly: book.isSubscriptionOnly || false\n    });\n    setPreview(book.cover);\n    setEditingId(book._id);\n    window.scrollTo(0, 0);\n  };\n  const handleDeleteBook = async id => {\n    if (window.confirm('Вы уверены, что хотите удалить эту книгу?')) {\n      try {\n        const token = localStorage.getItem('adminToken');\n        await axios.delete(`http://localhost:5000/api/admin/books/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setBooks(prevBooks => prevBooks.filter(book => book._id !== id));\n        alert('Книга успешно удалена!');\n      } catch (error) {\n        console.error('Ошибка удаления:', error);\n        alert('Ошибка удаления книги');\n      }\n    }\n  };\n  const resetBookForm = () => {\n    setBookFormData({\n      title: '',\n      author: '',\n      genre: 'Фантастика',\n      cover: '/default-cover.jpg',\n      year: '',\n      pages: '',\n      price: '',\n      inStock: true,\n      rating: 0,\n      description: '',\n      isSubscriptionOnly: false\n    });\n    setPreview('');\n    setEditingId(null);\n  };\n  const handleBookChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setBookFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n    if (name === 'cover') {\n      setPreview(value);\n    }\n  };\n  const toggleUserSubscription = async (userId, currentStatus) => {\n    // Добавляем проверку ID\n    if (!userId || userId === 'undefined') {\n      console.error('Invalid user ID:', userId);\n      alert('Ошибка: неверный ID пользователя');\n      return;\n    }\n    if (!window.confirm(`Вы уверены, что хотите ${currentStatus ? 'отключить' : 'включить'} подписку?`)) {\n      return;\n    }\n    try {\n      const token = localStorage.getItem('adminToken');\n      if (!token) {\n        throw new Error('Токен администратора не найден');\n      }\n      const response = await axios.put(`http://localhost:5000/api/admin/user/${userId}/subscription`, {\n        isActive: !currentStatus\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      // Обновляем состояние с проверкой ID\n      setUsers(prevUsers => prevUsers.map(user => user.id === userId ? {\n        ...user,\n        subscription: {\n          ...user.subscription,\n          isActive: !currentStatus,\n          endDate: !currentStatus ? new Date(new Date().setMonth(new Date().getMonth() + 1)) : null\n        }\n      } : user));\n      alert(`Подписка успешно ${!currentStatus ? 'включена' : 'отключена'}!`);\n    } catch (error) {\n      var _error$response2, _error$response3, _error$response3$data;\n      console.error('Ошибка обновления подписки:', {\n        error,\n        response: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data\n      });\n      alert(`Ошибка: ${((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || error.message}`);\n    }\n  };\n  const filteredUsers = users.filter(user => user.email.toLowerCase().includes(searchTerm.toLowerCase()) || user.name && user.name.toLowerCase().includes(searchTerm.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-btn ${activeTab === 'books' ? 'active' : ''}`,\n        onClick: () => setActiveTab('books'),\n        children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043A\\u043D\\u0438\\u0433\\u0430\\u043C\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-btn ${activeTab === 'subscriptions' ? 'active' : ''}`,\n        onClick: () => setActiveTab('subscriptions'),\n        children: \"\\u041C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u044F \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), activeTab === 'books' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактировать книгу' : 'Добавить новую книгу'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleBookSubmit,\n        className: \"book-form\",\n        children: [preview && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cover-preview\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: preview,\n            alt: \"\\u041F\\u0440\\u0435\\u0432\\u044C\\u044E \\u043E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"title\",\n            value: bookFormData.title,\n            onChange: handleBookChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0410\\u0432\\u0442\\u043E\\u0440:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"author\",\n            value: bookFormData.author,\n            onChange: handleBookChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0416\\u0430\\u043D\\u0440:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"genre\",\n            value: bookFormData.genre,\n            onChange: handleBookChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u0424\\u0430\\u043D\\u0442\\u0430\\u0441\\u0442\\u0438\\u043A\\u0430\",\n              children: \"\\u0424\\u0430\\u043D\\u0442\\u0430\\u0441\\u0442\\u0438\\u043A\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u0414\\u0435\\u0442\\u0435\\u043A\\u0442\\u0438\\u0432\",\n              children: \"\\u0414\\u0435\\u0442\\u0435\\u043A\\u0442\\u0438\\u0432\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u0420\\u043E\\u043C\\u0430\\u043D\",\n              children: \"\\u0420\\u043E\\u043C\\u0430\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u041D\\u0430\\u0443\\u0447\\u043D\\u0430\\u044F \\u043B\\u0438\\u0442\\u0435\\u0440\\u0430\\u0442\\u0443\\u0440\\u0430\",\n              children: \"\\u041D\\u0430\\u0443\\u0447\\u043D\\u0430\\u044F \\u043B\\u0438\\u0442\\u0435\\u0440\\u0430\\u0442\\u0443\\u0440\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0443:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"cover\",\n            value: bookFormData.cover,\n            onChange: handleBookChange,\n            placeholder: \"https://example.com/cover.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0413\\u043E\\u0434 \\u0438\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"year\",\n              value: bookFormData.year,\n              onChange: handleBookChange,\n              min: \"1800\",\n              max: new Date().getFullYear()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"pages\",\n              value: bookFormData.pages,\n              onChange: handleBookChange,\n              min: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0426\\u0435\\u043D\\u0430:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"price\",\n              value: bookFormData.price,\n              onChange: handleBookChange,\n              min: \"0\",\n              step: \"0.01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"rating\",\n              value: bookFormData.rating,\n              onChange: handleBookChange,\n              min: \"0\",\n              max: \"5\",\n              step: \"0.1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"inStock\",\n              checked: bookFormData.inStock,\n              onChange: handleBookChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), \"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"isSubscriptionOnly\",\n              checked: bookFormData.isSubscriptionOnly,\n              onChange: handleBookChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this), \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0434\\u043B\\u044F \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043A\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"submit-btn\",\n            children: editingId ? 'Сохранить изменения' : 'Добавить книгу'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), editingId && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"cancel-btn\",\n            onClick: resetBookForm,\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043A\\u043D\\u0438\\u0433\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 11\n      }, this), isLoadingBooks ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"books-list\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"books-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043A\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 15\n        }, this), books.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"book-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-cover\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: book.cover,\n              alt: book.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-title\",\n            children: book.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-author\",\n            children: book.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-subscription-status\",\n            children: book.isSubscriptionOnly ? '✅ Да' : '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"edit-btn\",\n              onClick: () => handleEditBook(book),\n              children: \"\\u270F\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"delete-btn\",\n              onClick: () => handleDeleteBook(book._id),\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 19\n          }, this)]\n        }, book._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u041C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u044F \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439 \\u043F\\u043E email \\u0438\\u043B\\u0438 \\u0438\\u043C\\u0435\\u043D\\u0438...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 11\n      }, this), isLoadingUsers ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"users-list\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"users-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0418\\u043C\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043A\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 15\n        }, this), filteredUsers.length > 0 ? filteredUsers.map(user => {\n          var _user$subscription, _user$subscription2, _user$subscription4;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-name\",\n              children: user.name || 'Не указано'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-email\",\n              children: user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-subscription-status\",\n              children: (_user$subscription = user.subscription) !== null && _user$subscription !== void 0 && _user$subscription.isActive ? '✅ Активна' : '❌ Не активна'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `subscription-btn ${(_user$subscription2 = user.subscription) !== null && _user$subscription2 !== void 0 && _user$subscription2.isActive ? 'cancel' : 'activate'}`,\n                onClick: () => {\n                  var _user$subscription3;\n                  return toggleUserSubscription(user.id, (_user$subscription3 = user.subscription) === null || _user$subscription3 === void 0 ? void 0 : _user$subscription3.isActive);\n                },\n                children: (_user$subscription4 = user.subscription) !== null && _user$subscription4 !== void 0 && _user$subscription4.isActive ? 'Отключить' : 'Включить'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 21\n            }, this)]\n          }, user.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 19\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-results\",\n          children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminPanel, \"yO3sOzMTARysZaBWO/bpkKmXcm4=\");\n_c = AdminPanel;\nexport default AdminPanel;\nvar _c;\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminPanel","_s","activeTab","setActiveTab","books","setBooks","bookFormData","setBookFormData","title","author","genre","cover","year","pages","price","inStock","rating","description","isSubscriptionOnly","preview","setPreview","editingId","setEditingId","isLoadingBooks","setIsLoadingBooks","users","setUsers","isLoadingUsers","setIsLoadingUsers","searchTerm","setSearchTerm","fetchBooks","fetchUsers","response","get","data","error","alert","console","log","token","localStorage","getItem","headers","Authorization","usersWithIds","map","user","id","warn","handleBookSubmit","e","preventDefault","transformedData","Number","Boolean","put","prevBooks","book","_id","post","resetBookForm","_error$response","_error$response$data","message","handleEditBook","window","scrollTo","handleDeleteBook","confirm","delete","filter","handleBookChange","name","value","type","checked","target","prev","toggleUserSubscription","userId","currentStatus","Error","isActive","prevUsers","subscription","endDate","Date","setMonth","getMonth","_error$response2","_error$response3","_error$response3$data","filteredUsers","email","toLowerCase","includes","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","src","alt","onChange","required","placeholder","min","max","getFullYear","step","length","_user$subscription","_user$subscription2","_user$subscription4","_user$subscription3","_c","$RefreshReg$"],"sources":["C:/Users/богдан/Documents/GitHub/Online-library/client/src/pages/AdminPanel.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport '../styles/AdminPanel.css';\r\n\r\nconst AdminPanel = () => {\r\n  // Состояния для управления вкладками\r\n  const [activeTab, setActiveTab] = useState('books');\r\n  \r\n  // Состояния для управления книгами\r\n  const [books, setBooks] = useState([]);\r\n  const [bookFormData, setBookFormData] = useState({\r\n    title: '',\r\n    author: '',\r\n    genre: 'Фантастика',\r\n    cover: '/default-cover.jpg',\r\n    year: '',\r\n    pages: '',\r\n    price: '',\r\n    inStock: true,\r\n    rating: 0,\r\n    description: '',\r\n    isSubscriptionOnly: false\r\n  });\r\n  const [preview, setPreview] = useState('');\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [isLoadingBooks, setIsLoadingBooks] = useState(true);\r\n  \r\n  // Состояния для управления подписками\r\n  const [users, setUsers] = useState([]);\r\n  const [isLoadingUsers, setIsLoadingUsers] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Загрузка данных при монтировании и переключении вкладок\r\n  useEffect(() => {\r\n    if (activeTab === 'books') {\r\n      fetchBooks();\r\n    } else if (activeTab === 'subscriptions') {\r\n      fetchUsers();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const fetchBooks = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/books');\r\n      setBooks(response.data);\r\n      setIsLoadingBooks(false);\r\n    } catch (error) {\r\n      alert('Ошибка загрузки книг');\r\n    }\r\n  };\r\n    useEffect(() => {\r\n      if (activeTab === 'subscriptions') {\r\n        console.log('Users data:', users); // Добавьте эту строку\r\n        fetchUsers();\r\n      }\r\n    }, [activeTab]);\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const token = localStorage.getItem('adminToken');\r\n        const response = await axios.get('http://localhost:5000/api/admin/users', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        \r\n        // Добавляем проверку данных\r\n        const usersWithIds = response.data.map(user => {\r\n          if (!user.id) {\r\n            console.warn('User without _id:', user);\r\n          }\r\n          return user;\r\n        });\r\n        \r\n        setUsers(usersWithIds);\r\n        setIsLoadingUsers(false);\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error);\r\n        alert('Ошибка загрузки пользователей');\r\n      }\r\n    };\r\n\r\n  const handleBookSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const transformedData = {\r\n        ...bookFormData,\r\n        year: Number(bookFormData.year),\r\n        pages: Number(bookFormData.pages),\r\n        price: Number(bookFormData.price),\r\n        rating: Number(bookFormData.rating),\r\n        isSubscriptionOnly: Boolean(bookFormData.isSubscriptionOnly)\r\n      };\r\n\r\n      const token = localStorage.getItem('adminToken');\r\n\r\n      if (editingId) {\r\n        const response = await axios.put(\r\n          `http://localhost:5000/api/admin/books/${editingId}`,\r\n          transformedData,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n\r\n        setBooks(prevBooks =>\r\n          prevBooks.map(book =>\r\n            book._id === editingId ? response.data : book\r\n          )\r\n        );\r\n        alert('Книга успешно обновлена!');\r\n      } else {\r\n        const response = await axios.post(\r\n          'http://localhost:5000/api/admin/books',\r\n          transformedData,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n\r\n        setBooks(prevBooks => [...prevBooks, response.data]);\r\n        alert('Книга успешно добавлена!');\r\n      }\r\n\r\n      resetBookForm();\r\n    } catch (error) {\r\n      console.error('Ошибка:', error);\r\n      alert(`Ошибка: ${error.response?.data?.message || error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleEditBook = (book) => {\r\n    setBookFormData({\r\n      title: book.title,\r\n      author: book.author,\r\n      genre: book.genre,\r\n      cover: book.cover,\r\n      year: book.year,\r\n      pages: book.pages,\r\n      price: book.price,\r\n      inStock: book.inStock,\r\n      rating: book.rating,\r\n      description: book.description || '',\r\n      isSubscriptionOnly: book.isSubscriptionOnly || false\r\n    });\r\n    setPreview(book.cover);\r\n    setEditingId(book._id);\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  const handleDeleteBook = async (id) => {\r\n    if (window.confirm('Вы уверены, что хотите удалить эту книгу?')) {\r\n      try {\r\n        const token = localStorage.getItem('adminToken');\r\n        await axios.delete(\r\n          `http://localhost:5000/api/admin/books/${id}`,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n\r\n        setBooks(prevBooks => prevBooks.filter(book => book._id !== id));\r\n        alert('Книга успешно удалена!');\r\n      } catch (error) {\r\n        console.error('Ошибка удаления:', error);\r\n        alert('Ошибка удаления книги');\r\n      }\r\n    }\r\n  };\r\n\r\n  const resetBookForm = () => {\r\n    setBookFormData({\r\n      title: '',\r\n      author: '',\r\n      genre: 'Фантастика',\r\n      cover: '/default-cover.jpg',\r\n      year: '',\r\n      pages: '',\r\n      price: '',\r\n      inStock: true,\r\n      rating: 0,\r\n      description: '',\r\n      isSubscriptionOnly: false\r\n    });\r\n    setPreview('');\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleBookChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setBookFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n\r\n    if (name === 'cover') {\r\n      setPreview(value);\r\n    }\r\n  };\r\n\r\n const toggleUserSubscription = async (userId, currentStatus) => {\r\n  // Добавляем проверку ID\r\n  if (!userId || userId === 'undefined') {\r\n    console.error('Invalid user ID:', userId);\r\n    alert('Ошибка: неверный ID пользователя');\r\n    return;\r\n  }\r\n\r\n  if (!window.confirm(`Вы уверены, что хотите ${currentStatus ? 'отключить' : 'включить'} подписку?`)) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const token = localStorage.getItem('adminToken');\r\n    if (!token) {\r\n      throw new Error('Токен администратора не найден');\r\n    }\r\n\r\n    const response = await axios.put(\r\n      `http://localhost:5000/api/admin/user/${userId}/subscription`,\r\n      { isActive: !currentStatus },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }\r\n    );\r\n\r\n    // Обновляем состояние с проверкой ID\r\n    setUsers(prevUsers => \r\n      prevUsers.map(user => \r\n        user.id === userId\r\n          ? {\r\n              ...user,\r\n              subscription: {\r\n                ...user.subscription,\r\n                isActive: !currentStatus,\r\n                endDate: !currentStatus \r\n                  ? new Date(new Date().setMonth(new Date().getMonth() + 1))\r\n                  : null\r\n              }\r\n            }\r\n          : user\r\n      )\r\n    );\r\n    \r\n    alert(`Подписка успешно ${!currentStatus ? 'включена' : 'отключена'}!`);\r\n  } catch (error) {\r\n    console.error('Ошибка обновления подписки:', {\r\n      error,\r\n      response: error.response?.data\r\n    });\r\n    alert(`Ошибка: ${error.response?.data?.message || error.message}`);\r\n  }\r\n};\r\n\r\n  const filteredUsers = users.filter(user =>\r\n    user.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    (user.name && user.name.toLowerCase().includes(searchTerm.toLowerCase()))\r\n  );\r\n\r\n  return (\r\n    <div className=\"admin-panel\">\r\n      <div className=\"admin-tabs\">\r\n        <button\r\n          className={`tab-btn ${activeTab === 'books' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('books')}\r\n        >\r\n          Управление книгами\r\n        </button>\r\n        <button\r\n          className={`tab-btn ${activeTab === 'subscriptions' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('subscriptions')}\r\n        >\r\n          Модерация подписок\r\n        </button>\r\n      </div>\r\n\r\n      {activeTab === 'books' ? (\r\n        <>\r\n          <h2>{editingId ? 'Редактировать книгу' : 'Добавить новую книгу'}</h2>\r\n          <form onSubmit={handleBookSubmit} className=\"book-form\">\r\n            {preview && (\r\n              <div className=\"cover-preview\">\r\n                <img src={preview} alt=\"Превью обложки\" />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"form-group\">\r\n              <label>Название:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"title\"\r\n                value={bookFormData.title}\r\n                onChange={handleBookChange}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Автор:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"author\"\r\n                value={bookFormData.author}\r\n                onChange={handleBookChange}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Жанр:</label>\r\n              <select\r\n                name=\"genre\"\r\n                value={bookFormData.genre}\r\n                onChange={handleBookChange}\r\n              >\r\n                <option value=\"Фантастика\">Фантастика</option>\r\n                <option value=\"Детектив\">Детектив</option>\r\n                <option value=\"Роман\">Роман</option>\r\n                <option value=\"Научная литература\">Научная литература</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Ссылка на обложку:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"cover\"\r\n                value={bookFormData.cover}\r\n                onChange={handleBookChange}\r\n                placeholder=\"https://example.com/cover.jpg\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group\">\r\n                <label>Год издания:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"year\"\r\n                  value={bookFormData.year}\r\n                  onChange={handleBookChange}\r\n                  min=\"1800\"\r\n                  max={new Date().getFullYear()}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Количество страниц:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"pages\"\r\n                  value={bookFormData.pages}\r\n                  onChange={handleBookChange}\r\n                  min=\"1\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group\">\r\n                <label>Цена:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"price\"\r\n                  value={bookFormData.price}\r\n                  onChange={handleBookChange}\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Рейтинг:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"rating\"\r\n                  value={bookFormData.rating}\r\n                  onChange={handleBookChange}\r\n                  min=\"0\"\r\n                  max=\"5\"\r\n                  step=\"0.1\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-group checkbox-group\">\r\n              <label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  name=\"inStock\"\r\n                  checked={bookFormData.inStock}\r\n                  onChange={handleBookChange}\r\n                />\r\n                В наличии\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"form-group checkbox-group\">\r\n              <label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  name=\"isSubscriptionOnly\"\r\n                  checked={bookFormData.isSubscriptionOnly}\r\n                  onChange={handleBookChange}\r\n                />\r\n                Только для подписки\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"form-buttons\">\r\n              <button type=\"submit\" className=\"submit-btn\">\r\n                {editingId ? 'Сохранить изменения' : 'Добавить книгу'}\r\n              </button>\r\n              {editingId && (\r\n                <button type=\"button\" className=\"cancel-btn\" onClick={resetBookForm}>\r\n                  Отмена\r\n                </button>\r\n              )}\r\n            </div>\r\n          </form>\r\n\r\n          <h3>Список книг</h3>\r\n          {isLoadingBooks ? (\r\n            <div className=\"loading\">Загрузка...</div>\r\n          ) : (\r\n            <div className=\"books-list\">\r\n              <div className=\"books-header\">\r\n                <span>Обложка</span>\r\n                <span>Название</span>\r\n                <span>Автор</span>\r\n                <span>Подписка</span>\r\n                <span>Действия</span>\r\n              </div>\r\n              {books.map(book => (\r\n                <div className=\"book-item\" key={book._id}>\r\n                  <div className=\"book-cover\">\r\n                    <img src={book.cover} alt={book.title} />\r\n                  </div>\r\n                  <div className=\"book-title\">{book.title}</div>\r\n                  <div className=\"book-author\">{book.author}</div>\r\n                  <div className=\"book-subscription-status\">\r\n                    {book.isSubscriptionOnly ? '✅ Да' : '—'}\r\n                  </div>\r\n                  <div className=\"book-actions\">\r\n                    <button\r\n                      className=\"edit-btn\"\r\n                      onClick={() => handleEditBook(book)}\r\n                    >\r\n                      ✏️\r\n                    </button>\r\n                    <button\r\n                      className=\"delete-btn\"\r\n                      onClick={() => handleDeleteBook(book._id)}\r\n                    >\r\n                      🗑️\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <h2>Модерация подписок</h2>\r\n          \r\n          <div className=\"search-bar\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Поиск пользователей по email или имени...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n          </div>\r\n          \r\n          {isLoadingUsers ? (\r\n            <div className=\"loading\">Загрузка пользователей...</div>\r\n          ) : (\r\n            <div className=\"users-list\">\r\n              <div className=\"users-header\">\r\n                <span>Имя</span>\r\n                <span>Email</span>\r\n                <span>Подписка</span>\r\n                <span>Действия</span>\r\n              </div>\r\n              {filteredUsers.length > 0 ? (\r\n                filteredUsers.map(user => (\r\n                  <div className=\"user-item\" key={user.id}>\r\n                    <div className=\"user-name\">\r\n                      {user.name || 'Не указано'}\r\n                    </div>\r\n                    <div className=\"user-email\">\r\n                      {user.email}\r\n                    </div>\r\n                    <div className=\"user-subscription-status\">\r\n                      {user.subscription?.isActive ? '✅ Активна' : '❌ Не активна'}\r\n                    </div>\r\n                    <div className=\"user-actions\">\r\n                      <button\r\n                        className={`subscription-btn ${user.subscription?.isActive ? 'cancel' : 'activate'}`}\r\n                        onClick={() => toggleUserSubscription(user.id, user.subscription?.isActive)}\r\n                      >\r\n                        {user.subscription?.isActive ? 'Отключить' : 'Включить'}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className=\"no-results\">Пользователи не найдены</div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}